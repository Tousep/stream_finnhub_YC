# Проект исследования: рабочий процесс

Этот рабочий процесс является частью моего исследовательского проекта, но в настоящее время он сталкивается с проблемами и не функционирует так, как ожидалось.

## Планы

1. Создать запрос на объединение (pull request) в ветку `uat`.
2. Запустить рабочий процесс `main.yml`, включающий в себя следующие шаги:
    1. Собрать и отправить Docker-образы в облачную папку UAT.
    2. Запланировать и применить Terraform к облачной папке UAT.
    3. Протестировать инфраструктуру (кластеры) в облачной папке UAT.
    4. Уничтожить ресурсы Terraform в облачной папке UAT.
    5. Собрать и отправить Docker-образы в облачную папку PROD.
    6. Запланировать и применить Terraform к облачной папке PROD.

![Arch](https://github.com/Tousep/stream_finnhub_YC/blob/main/.github/workflows/workflow-Plan.jpeg)

## Рабочие процессы

### 1. `main.yml`

**Описание:** Главный поток управляет выполнением параллельных рабочих процессов с учетом окружения. Для продакшена обеспечивается использование протестированной в UAT инфраструктуры.

### 2. `docker-image.yml`

**Описание:** Собирает образы контейнеров и отправляет их в облачный контейнерный реестр.

### 3. `terraform_apply.yml`

**Описание:** Применяет файлы Terraform к указанной папке, используя среды из конфигурации UAT.

### 4. `terraform_destroy.yml`

**Описание:** Уничтожает инфраструктуру в указанной облачной папке.

### 5. `test.yml`

**Описание:** Запускает тесты, расположенные в `./terraform-ydb/test/`.

**Конфигурации окружения:**
  - UAT
  - PROD

**Секреты:**
  - CLICKHOUSE_DB_FINNHUB_USER
  - CLICKHOUSE_DB_FINNHUB_USER_SECRET
  - CLICKHOUSE_DB_NAME
  - FINNHUB_API_KEY
  - KAFKA_FINNHUB_TOPIC
  - KAFKA_USER_CONSUMER
  - KAFKA_USER_PRODUCER
  - KAFKA_USER_SECRET_CONSUMER
  - KAFKA_USER_SECRET_PRODUCER
  - S3_TERRAFORM
  - TF_S3_ACCESS_KEY
  - TF_S3_SECRET_KEY
  - YC_KEY_ID
  - YC_PRIVATE_KEY
  - YC_SERVICE_ACCOUNT_ID

**Переменные:**
  - YC_CLOUD_ID
  - YC_CONTAINER_REGISTRY
  - YC_FOLDER_ID

## Содействие

Если у вас возникли проблемы или есть предложения по улучшению, не стесняйтесь открывать вопрос или отправлять запрос на объединение.

## Лицензия

Этот исследовательский проект лицензирован в соответствии с [Лицензией MIT](LICENSE).
